/*! PixiJS TextStyle (Wed, 11 Mar 2020 19:30:51 UTC) */
!function(t){"use strict";function e(t,e){for(var n in e)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}function n(t,e){if(t===e)return!0;if(typeof t!=typeof e||null===t||null===e||"object"!=typeof t||"object"!=typeof e)return!1;var i=0,o=0;for(var a in t)++i;for(var s in e)if(++o,!(s in t&&n(t[s],e[s])))return!1;return i===o}t=t&&t.hasOwnProperty("default")?t.default:t,PIXI.TextStyle.prototype.toJSON=function(){var t={};for(var e in this)if(0===e.indexOf("_")){var n=e.slice(1);t[n]=this[n]}return t};var i=function(t){this.parent=t.attrs.parent,this.id=t.attrs.id,this.name=t.attrs.name};i.prototype.view=function(){return m("div",{class:"row"},m("label",{class:"col-xs-5",for:this.id,title:this.id},this.name),m("div",{class:"col-xs-7"},this.init()))},i.prototype.parse=function(t){var e=this;return Array.isArray(t)?t=t.map(function(t){return e.parse(t)}):/^-?\d+$/.test(t)?t=parseInt(t):/^-?\d*\.\d+$/.test(t)&&(t=parseFloat(t)),t},i.prototype.update=function(t){this.parent.style[this.id]=this.parse(t),this.parent.app.render()},i.prototype.init=function(){throw"override init"};var o=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){var e=this,n=t.withAttr("value",function(t){e.parent.background=t,e.parent.app.render()});return t("input",{class:"form-control input-sm color",type:"color",id:this.id,key:this.id,value:this.parent.background,oninput:n})},n}(i),a=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){return t("input",{type:"checkbox",class:"check",id:this.id,key:this.id,onchange:t.withAttr("checked",this.update,this),checked:this.parent.style[this.id]})},n}(i),s=function(e){function n(t){var n=this;e.call(this,t),this.colorMap={"#000":"black","#fff":"white","#c0c0c0":"silver","#f00":"red","#800000":"maroon","#ff0":"yellow","#808000":"olive","#0f0":"lime","#008000":"green","#0ff":"aqua","#008080":"teal","#00f":"blue","#000080":"navy","#f0f":"fuchsia","#800080":"purple"},this.stringMap={},Object.keys(this.colorMap).forEach(function(t){n.stringMap[n.colorMap[t]]=t})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){var e=this,n=t.withAttr("value",function(t){e.update(e.hexToString(t))});return t("input",{class:"form-control input-sm color color-group",type:"color",id:this.id,key:this.id,oninput:n,value:this.stringToHex(this.parent.style[this.id])})},n.prototype.stringToHex=function(t){var e=this.stringMap[t]||t;return e=e.replace(/^#([a-f0-9])([a-f0-9])([a-f0-9])$/,"#$1$1$2$2$3$3")},n.prototype.hexToString=function(t){var e=t.replace(/([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/,"$1$2$3");return this.colorMap[e]||e},n}(i),r=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){var n,i=this,o=this.parent.style[this.id];return n=Array.isArray(o)?o.map(function(e,n){var a=[t("button",{class:"btn btn-sm btn-default",key:i.id+"Remove"+n,onclick:i.removeStop.bind(i,n)},t("span",{class:"glyphicon glyphicon-remove"}))];if(n>0&&a.unshift(t("button",{class:"btn btn-sm btn-default",key:i.id+"Up"+n,onclick:i.moveUpStop.bind(i,n)},t("span",{class:"glyphicon glyphicon-arrow-up"}))),n<o.length-1){var s="btn btn-sm btn-default "+(n===o.length-1?"disabled":"");a.unshift(t("button",{class:s,key:i.id+"Down"+n,disabled:n===o.length-1,onclick:i.moveDownStop.bind(i,n)},t("span",{class:"glyphicon glyphicon-arrow-down"})))}return t("div",{class:"input-group color-group"},t("input",{class:"form-control input-sm color",type:"color",id:i.id+n,key:i.id+n,oninput:t.withAttr("value",i.updateIndex.bind(i,n)),value:i.stringToHex(e)}),t("span",{class:"input-group-btn"},a))}):[e.prototype.init.call(this)],t("div",{class:"gradient"},n,t("button",{class:"btn-block btn btn-sm btn-default",key:this.id+"Add",onclick:this.addStop.bind(this)},t("span",{class:"glyphicon glyphicon-plus"}),"Add Color"))},n.prototype.moveUpStop=function(t){if(0!==t){var e=this.parent.style[this.id],n=e[t];e[t]=e[t-1],e[t-1]=n,this.update(e)}},n.prototype.moveDownStop=function(t){var e=this.parent.style[this.id];if(t!==e.length-1){var n=e[t];e[t]=e[t+1],e[t+1]=n,this.update(e)}},n.prototype.removeStop=function(t){var e=this.parent.style[this.id];e.splice(t,1),1===e.length&&(e=e[0]),this.update(e)},n.prototype.updateIndex=function(t,e){this.parent.style[this.id][t]=this.hexToString(e),this.update(this.parent.style[this.id])},n.prototype.addStop=function(){var e=this,n=this.parent.style[this.id];Array.isArray(n)||(n=[n]),n.push("#000000"),n=n.map(function(t){return e.hexToString(t)}),this.update(n),t.redraw()},n}(s),l=function(e){function n(t){e.call(this,t),this.step=t.attrs.step||1,this.min=t.attrs.min,this.max=t.attrs.max}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){return t("input",{class:"form-control input-sm number",type:"number",id:this.id,key:this.id,step:this.step,min:this.min,max:this.max,oninput:t.withAttr("value",this.update,this),value:this.parent.style[this.id]})},n}(i),p=function(e){function n(n){e.call(this,n),this.options=n.attrs.options.map(function(e){var n=e;return Array.isArray(e)&&(n=e[1],e=String(e[0])),t("option",{value:e},n)})}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){return t("select",{class:"form-control input-sm",id:this.id,key:this.key,oninput:t.withAttr("value",this.update,this),value:this.parent.style[this.id]},this.options)},n}(i),c=function(e){function n(t){e.call(this,t),this.step=t.attrs.step||1,this.min=t.attrs.min,this.max=t.attrs.max}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.init=function(){var e,n=this,i=this.parent.style[this.id];return e=Array.isArray(i)?i.map(function(e,i){var o=[t("button",{class:"btn btn-sm btn-default",key:n.id+"Remove"+i,onclick:n.removeStop.bind(n,i)},t("span",{class:"glyphicon glyphicon-remove"}))];return t("div",{class:"input-group color-group"},t("input",{class:"form-control input-sm number",type:"number",id:n.id+i,key:n.id+i,oninput:t.withAttr("value",n.updateIndex.bind(n,i)),step:n.step,min:n.min,max:n.max,value:e}),t("span",{class:"input-group-btn"},o))}):[],t("div",{class:"gradient"},e,t("button",{class:"btn-block btn btn-sm btn-default",key:this.id+"Add",onclick:this.addStop.bind(this)},t("span",{class:"glyphicon glyphicon-plus"}),"Add Stop Point"))},n.prototype.removeStop=function(t){var e=this.parent.style[this.id];e.splice(t,1),this.update(e.slice())},n.prototype.updateIndex=function(t,e){this.parent.style[this.id][t]=e,this.update(this.parent.style[this.id].slice())},n.prototype.addStop=function(){var e=this.parent.style[this.id];Array.isArray(e)||(e=[e]),e.push(e[e.length-1]||0),this.update(e),t.redraw()},n}(i),d=function(t){this._loading=!1,this.onrender=t.attrs.onrender,this.text=t.attrs.text,this.initialize()},h={PREFIX:{configurable:!0},DEFAULT:{configurable:!0}};h.PREFIX.get=function(){return"lf_"},h.DEFAULT.get=function(){return"Arial"},d.prototype.initialize=function(){var t=this;Object.keys(localStorage).filter(function(t){return t.indexOf(d.PREFIX)>-1}).forEach(function(e){var n=e.split(d.PREFIX)[1];t.addFont(n,localStorage.getItem(e),!0)})},d.prototype.onLoadFont=function(t,e){var n=this;if(!this._loading){this._loading=!0;var i=t.target.files[0],o=i.name.split(".")[0],a=new FileReader;a.onload=function(t){n.addToLocalStorage(d.PREFIX+o,t.target.result),n.addFont(o,t.target.result,e)},a.readAsDataURL(i),t.target.value=""}},d.prototype.addToLocalStorage=function(t,e){try{localStorage.setItem(t,e)}catch(t){alert("addToLocalStorage failed. Your local storage is full or your font exceeds the limit!\nThe fonts will NOT BE SAVED in your local cache.")}},d.prototype.addFont=function(e,n,i){var o=this;new FontFace(e,"url("+n+")",{style:"normal",weight:700}).load().then(function(n){document.fonts.add(n);var a=document.getElementById("fontFamily"),s=document.createElement("option");s.text=e,s.value=e,a.add(s),i||(o.text.style.fontFamily=e),o.text.updateText(),t.redraw(),o.onrender(),o._loading=!1}).catch(function(t){alert("addFont failed. Maybe the font you are trying to load is too big?\n"+t),this._loading=!1})},d.prototype.clearFonts=function(){Object.keys(localStorage).filter(function(t){return t.indexOf(d.PREFIX)>-1}).forEach(function(t){var e=t.split(d.PREFIX)[1],n=document.getElementById("fontFamily"),i=n.querySelector("option[value="+e+"]");n.removeChild(i),localStorage.removeItem(t)}),this.text.style.fontFamily=d.DEFAULT,t.redraw(),this.onrender()},d.prototype.view=function(){return t("div",{class:"row font-loader"},t("label",{class:"col-xs-5"}),t("div",{class:"col-xs-7"},t("div",{class:"btn-group btn-group-xs btn-group-full"},t("button",{title:"Add local custom fonts",class:"btn btn-primary btn-file"},t("span",{class:"glyphicon glyphicon-open"}),t("input",{type:"file",onchange:this.onLoadFont.bind(this)}),t("small",null," Add")),t("button",{title:"Clear all customs fonts",class:"btn btn-primary",onclick:this.clearFonts.bind(this)},t("span",{class:"glyphicon glyphicon-erase"}),t("small",null," Clear")))))},Object.defineProperties(d,h);var u=function(t){this.parent=t.attrs.parent,this.onclose=t.attrs.onclose,this._saving=!1,this.format=localStorage.snapFormat||"png",this.alpha=localStorage.snapAlpha||"1"};u.prototype.onSave=function(){var t=this;if(!this._saving){this._saving=!0;var e=this.parent,n=e.text,i=e.style,o=e.background,a=e.app,s=new PIXI.Container,r=new PIXI.Sprite(PIXI.Texture.WHITE),l=new PIXI.Text(n._text,i);r.anchor.set(.5),r.scale.set(l.width/r.width,l.height/r.height),r.tint=parseInt(o.replace("#",""),16),r.alpha=parseInt(this.alpha),l.anchor.set(.5),s.addChild(r,l);var p=a.renderer.generateTexture(s);s.destroy(!0);var c=new PIXI.Sprite(p);a.renderer.extract.canvas(c).toBlob(function(e){var n=window.URL||window.webkitURL||URL,i=document.createElement("a");i.href=n.createObjectURL(e),i.download=l.text.substring(0,24)+"."+t.format,document.body.append(i),i.click(),i.remove(),c.destroy(!0),t._saving=!1},"image/"+this.format)}},u.prototype.onFormat=function(e){this.format=e.currentTarget.value,localStorage.setItem("snapFormat",this.format),t.redraw()},u.prototype.onAlpha=function(e){this.alpha=e.currentTarget.value,localStorage.setItem("snapAlpha",this.alpha),t.redraw()},u.prototype.view=function(){return t("div",{class:"well"},t("div",{class:"row config"},t("label",{class:"col-md-3 col-sm-4"},t("span",{class:"glyphicon glyphicon-picture"}),t("span",{class:"name"},"Format")),t("div",{class:"col-md-9 col-sm-8"},t("select",{class:"form-control input-sm",onchange:this.onFormat.bind(this),value:this.format},t("option",{value:"png"},"PNG"),t("option",{value:"jpg"},"JPG")))),t("div",{class:"row config"},t("label",{class:"col-md-3 col-sm-4"},t("span",{class:"glyphicon glyphicon-adjust"}),t("span",{class:"name"},"Background")),t("div",{class:"col-md-9 col-sm-8"},t("select",{class:"form-control input-sm",onchange:this.onAlpha.bind(this),value:this.alpha},t("option",{value:"0"},"0% (hidden)"),t("option",{value:"0.1"},"10%"),t("option",{value:"0.2"},"20%"),t("option",{value:"0.3"},"30%"),t("option",{value:"0.4"},"40%"),t("option",{value:"0.5"},"50%"),t("option",{value:"0.6"},"60%"),t("option",{value:"0.7"},"70%"),t("option",{value:"0.8"},"80%"),t("option",{value:"0.9"},"90%"),t("option",{value:"1"},"100% (visible)")))),t("div",{class:"row config"},t("div",{class:"col-md-10 col-sm-9 col-md-offset-2 col-sm-offset-3"},t("div",{class:"btn-group pull-right"},t("button",{class:"btn btn-primary",onclick:this.onSave.bind(this)},t("span",{class:"glyphicon glyphicon-save"})," Download"),t("button",{class:"btn btn-default",onclick:this.onclose},t("span",{class:"glyphicon glyphicon-remove"})," Close")))))};var f=function(t){this.id="panel-"+t.attrs.id,this.name=t.attrs.name;var e=localStorage[this.id];this.selected=void 0!==e?JSON.parse(e):!!t.attrs.selected};f.prototype.onclick=function(){this.selected=!this.selected,localStorage[this.id]=JSON.stringify(this.selected)},f.prototype.view=function(t){var e=this.selected?"expanded":"collapsed",n=this.selected?"pane visible":"pane hidden";return m("div",null,m("h4",{class:e,onclick:this.onclick.bind(this)},this.name),m("div",{class:n},t.children))};var y=function t(){this.defaults=new PIXI.TextStyle,this.defaultText="Hello World",this.defaultBG="#ffffff",this.style=new PIXI.TextStyle,this.defaults.dropShadowColor="black",this.style.dropShadowColor="black",this.text=new PIXI.Text("",this.style),this.text.anchor.set(.5),this.indent=parseInt(localStorage.indent)||t.INDENT.SPACE_4,this._snapOptions=!!localStorage.snapOptions;var n={text:localStorage.text||this.defaultText,background:localStorage.background||this.defaultBG,style:JSON.parse(localStorage.style||null)||this.defaults.toJSON()};if(document.location.hash)try{var i=document.location.hash.slice(1);n=Object.assign(n,JSON.parse(decodeURIComponent(i)))}catch(t){}PIXI.utils.skipHello(),PIXI.settings.ROUND_PIXELS=!0,this.app=new PIXI.Application({width:400,height:100,resolution:devicePixelRatio}),this.app.renderer.plugins.interaction.autoPreventDefault=!1,e(this.style,n.style),this.text.text=n.text,this.background=n.background,this.app.stage.addChild(this.text),this.app.stop()},g={background:{configurable:!0}};y.prototype.view=function(){var e=this,n=this.codeColor.bind(this);return t("div",{oncreate:this.init.bind(this)},t("nav",{class:"controls"},t("div",{class:"container-fluid"},t("h3",{class:"title"},"PixiJS TextStyle ",t("button",{class:"btn btn-primary btn-sm pull-right",onclick:this.reset.bind(this)},t("span",{class:"glyphicon glyphicon-refresh"}))),t(f,{id:"text",name:"Text",selected:"true"},t("textarea",{class:"form-control",id:"input",autofocus:"true",oninput:t.withAttr("value",this.onText.bind(this)),value:this.text.text})),t(f,{id:"font",name:"Font",selected:"true"},t(p,{parent:this,id:"fontFamily",name:"Font Family",options:["Arial","Arial Black","Comic Sans MS","Courier New","Georgia","Helvetica","Impact","Tahoma","Times New Roman","Verdana","Georgia, serif",'"Palatino Linotype", "Book Antiqua", Palatino, serif','"Times New Roman", Times, serif',"Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Comic Sans MS", cursive, sans-serif',"Impact, Charcoal, sans-serif",'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva, sans-serif",'"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif",'"Courier New", Courier, monospace','"Lucida Console", Monaco, monospace']}),t(d,{onrender:function(){return e.app.render()},text:this.text}),t(l,{parent:this,id:"fontSize",name:"Font Size",step:"1",min:"1"}),t(p,{parent:this,id:"fontStyle",name:"Font Style",options:["normal","italic","oblique"]}),t(p,{parent:this,id:"fontVariant",name:"Font Variant",options:["normal","small-caps"]}),t(p,{parent:this,id:"fontWeight",name:"Font Weight",options:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]})),t(f,{id:"fill",name:"Fill"},t(r,{parent:this,id:"fill",name:"Color"}),t(p,{parent:this,id:"fillGradientType",name:"Gradient Type",options:[[0,"linear vertical"],[1,"linear horizontal"]]}),t(c,{parent:this,id:"fillGradientStops",name:"Fill Gradient Stops",step:"0.1",min:"0",max:"1"})),t(f,{id:"stroke",name:"Stroke"},t(s,{parent:this,id:"stroke",name:"Color"}),t(l,{parent:this,id:"strokeThickness",name:"Thickness",step:"1",min:"0"}),t(p,{parent:this,id:"lineJoin",name:"Line Join",options:["miter","round","bevel"]}),t(l,{parent:this,id:"miterLimit",name:"Miter Limit",step:"1",min:"0"})),t(f,{id:"layout",name:"Layout"},t(l,{parent:this,id:"letterSpacing",name:"Letter Spacing"}),t(p,{parent:this,id:"textBaseline",name:"Text Baseline",options:["alphabetic","bottom","middle","top","hanging"]})),t(f,{id:"shadow",name:"Drop Shadow"},t(a,{parent:this,id:"dropShadow",name:"Enable"}),t(s,{parent:this,id:"dropShadowColor",name:"Color"}),t(l,{parent:this,id:"dropShadowAlpha",name:"Alpha",step:"0.1",min:"0",max:"1"}),t(l,{parent:this,id:"dropShadowAngle",name:"Angle",step:"0.1"}),t(l,{parent:this,id:"dropShadowBlur",name:"Blur"}),t(l,{parent:this,id:"dropShadowDistance",name:"Distance"})),t(f,{id:"multiline",name:"Multiline"},t(a,{parent:this,id:"wordWrap",name:"Enable"}),t(a,{parent:this,id:"breakWords",name:"Break Words"}),t(p,{parent:this,id:"align",name:"Align",options:["left","center","right"]}),t(p,{parent:this,id:"whiteSpace",name:"White Space",options:["normal","pre","pre-line"]}),t(l,{parent:this,id:"wordWrapWidth",name:"Wrap Width",step:"10",min:"0"}),t(l,{parent:this,id:"lineHeight",name:"Line Height",step:"1",min:"0"}),t(l,{parent:this,id:"leading",name:"Leading",step:"1",min:"0"})),t(f,{id:"texture",name:"Texture"},t(l,{parent:this,id:"padding",name:"Padding"}),t(a,{parent:this,id:"trim",name:"Trim"})),t(f,{id:"background",name:"Background"},t(o,{parent:this,id:"backgroundColor",name:"Color"})))),t("main",{class:"main"},t("div",{class:"col-sm-12"},t("h3",null,t("button",{class:"btn btn-primary btn-sm pull-right",onclick:this.onSnapToggle.bind(this)},t("span",{class:"glyphicon glyphicon-camera"})," Snapshot"),t("span",{class:"glyphicon glyphicon-eye-open"}),"Preview ",t("small",null,"PixiJS v",PIXI.VERSION)),t("div",{class:"renderer",id:"renderer"}),this._snapOptions&&t(u,{onclose:this.onSnapToggle.bind(this),parent:this})),t("div",{class:"col-sm-6"},t("h3",null,t("span",{class:"glyphicon glyphicon-scissors"})," JavaScript"),t("pre",{class:"code-display hljs"},t("code",{class:"javascript",onupdate:n,oncreate:n,innerHTML:this.getCode()}))),t("div",{class:"col-sm-6"},t("h3",null,t("span",{clasName:"glyphicon glyphicon-scissors"})," JSON ",t("span",{class:"btn-group pull-right"},t("button",{class:"btn btn-primary btn-sm",onclick:this.onSave.bind(this)},t("span",{class:"glyphicon glyphicon-save"})," Save"),t("button",{class:"btn btn-primary btn-sm btn-file"},t("span",{class:"glyphicon glyphicon-open"}),t("input",{type:"file",onchange:this.onLoad.bind(this)})," Load"))),t("pre",{class:"code-display hljs"},t("code",{class:"json",onupdate:n,oncreate:n,innerHTML:this.getCode(!0)}))),t("div",{class:"col-sm-12"},t("h3",null,t("span",{class:"glyphicon glyphicon-cog"})," Options"),t("div",{class:"well"},t("div",{class:"row config"},t("label",{class:"col-md-2 col-sm-3"},t("span",{class:"glyphicon glyphicon-indent-left"}),t("span",{class:"name"},"Indent")),t("div",{class:"col-md-10 col-sm-9"},t("select",{class:"form-control input-sm",onchange:this.onFormat.bind(this),value:this.indent},t("option",{value:y.INDENT.SPACE_4},"4 Spaces"),t("option",{value:y.INDENT.SPACE_3},"3 Spaces"),t("option",{value:y.INDENT.SPACE_2},"2 Spaces"),t("option",{value:y.INDENT.TAB},"Tab"),t("option",{value:y.INDENT.NONE},"No indent"),t("option",{value:y.INDENT.NONE_PRETTY},"No indent (with spaces)")))))),t("div",{class:"col-sm-12"},t("h3",null,t("span",{class:"glyphicon glyphicon-book"})," Documentation"),t("ul",null,t("li",null,t("a",{href:"//pixijs.download/release/docs/PIXI.TextStyle.html"},"PIXI.TextStyle")),t("li",null,t("a",{href:"//pixijs.download/release/docs/PIXI.Text.html"},"PIXI.Text")),t("li",null,t("a",{href:"//pixijs.download/release/docs/PIXI.TextMetrics.html"},"PIXI.TextMetrics"))))))},y.prototype.onFormat=function(e){this.indent=parseInt(e.target.value),localStorage.indent=this.indent,t.redraw()},y.prototype.onLoad=function(n){var i=this,o=n.target;if(1===o.files.length)if(/\.json$/.test(o.files[0].name)){var a=new FileReader;a.onload=function(){try{var n=JSON.parse(a.result);e(i.style,i.defaults.toJSON()),e(i.style,n),t.redraw(),i.app.render()}catch(t){alert("Unable to parse JSON file")}},a.readAsText(o.files[0]),n.target.value=""}else alert("Unable to load, must be a JSON file.")},y.prototype.onSave=function(){var t=this.style.toJSON();for(var e in t)n(t[e],this.defaults[e])&&delete t[e];var i=JSON.stringify(t,null,this.getIndent()),o=new Blob([i],{type:"text/plain;charset=utf-8"});saveAs(o,"style.json")},y.prototype.reset=function(){confirm("Are you sure you want to remove all your saved styles?")&&(localStorage.removeItem("background"),localStorage.removeItem("style"),localStorage.removeItem("text"),e(this.style,this.defaults.toJSON()),this.text.text=this.defaultText,this.background=this.defaultBG,t.redraw(),this.app.render())},y.prototype.onSnapToggle=function(){this._snapOptions=!this._snapOptions,this._snapOptions?localStorage.setItem("snapOptions","1"):localStorage.removeItem("snapOptions"),t.redraw()},g.background.set=function(t){localStorage.setItem("background",t),this.app.renderer.backgroundColor=parseInt(t.slice(1),16)},g.background.get=function(){var t=this.app.renderer.backgroundColor.toString(16);return"#"+"0".repeat(6-t.length)+t},y.prototype.resize=function(){var t=this.app.view,e=t.parentNode.clientWidth,n=t.parentNode.clientHeight;this.app.renderer.resize(e,n),this.text.x=e/2,this.text.y=n/2,this.app.render()},y.prototype.codeColor=function(t){hljs.highlightBlock(t.dom)},y.prototype.getIndent=function(){var t;switch(this.indent){case y.INDENT.SPACE_4:t="    ";break;case y.INDENT.SPACE_3:t="   ";break;case y.INDENT.SPACE_2:t="  ";break;case y.INDENT.TAB:t="\t";break;default:t=""}return t},y.prototype.getCode=function(t){var e=this.style.toJSON();for(var i in e)n(e[i],this.defaults[i])&&delete e[i];var o=this.getIndent(),a=y.INDENT.NONE_PRETTY===this.indent,s=JSON.stringify(e,null,o);if(t)return a?this.prettify(s):s;var r=JSON.stringify(e);localStorage.setItem("style",r);var l={};"{}"!==r&&(l.style=e),this.defaultText!==this.text.text&&(l.text=this.text.text),this.defaultBG!==this.background&&(l.background=this.background);var p=Object.keys(l).length?encodeURIComponent(JSON.stringify(l)):"";history.replaceState(null,null,"#"+p),"{}"===s?s="":(s=s.replace(/"([^"]+)":/g,"$1:").replace(/"/g,"'").replace(/'/g,'"'),a&&(s=this.prettify(s)));return"const style = new PIXI.TextStyle("+s+");\nconst text = new PIXI.Text('"+this.text.text.replace(/\n/g,"\\n").replace(/'/g,"\\'")+"', style);"},y.prototype.prettify=function(t){return t.replace(/([{:,])/g,"$1 ").replace(/}$/," }")},y.prototype.onText=function(t){localStorage.setItem("text",t),this.text.text=t,this.app.render()},y.prototype.init=function(){document.getElementById("renderer").appendChild(this.app.view),this.app.render(),this.resize(),window.addEventListener("resize",this.resize.bind(this),!1)},Object.defineProperties(y.prototype,g),y.INDENT={NONE:1,NONE_PRETTY:2,TAB:3,SPACE_4:4,SPACE_3:5,SPACE_2:6},window.addEventListener("load",function(){t.mount(document.body,y)})}(m);
